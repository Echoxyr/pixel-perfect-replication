// Tutorial step definitions for interactive guided tours
// TUTORIAL ULTRA-DETTAGLIATI - Guida completa per OGNI operazione come video tutorial professionali

export interface TutorialStep {
  id: string;
  title: string;
  description: string;
  targetSelector?: string; // CSS selector for element to highlight
  route?: string; // Navigate to this route before showing step
  position?: 'top' | 'bottom' | 'left' | 'right' | 'center';
  action?: 'click' | 'type' | 'scroll' | 'hover' | 'wait';
  actionDelay?: number; // ms to wait before simulating action
  highlightPadding?: number;
  cursorOffset?: { x: number; y: number };
}

export interface Tutorial {
  id: string;
  title: string;
  description: string;
  icon: string;
  estimatedTime: string;
  category: 'principale' | 'commesse' | 'hse' | 'commerciale' | 'amministrazione' | 'logistica' | 'compliance';
  steps: TutorialStep[];
}

export const tutorials: Tutorial[] = [
  // ==================== CATEGORIA: PRINCIPALE ====================
  {
    id: 'dashboard-tour',
    title: 'Tour Completo della Dashboard',
    description: 'Esplora ogni funzionalit√† della dashboard principale: statistiche in tempo reale, sistema di alert, navigazione avanzata, ricerca globale e personalizzazione interfaccia',
    icon: 'LayoutDashboard',
    estimatedTime: '5 minuti',
    category: 'principale',
    steps: [
      {
        id: 'intro',
        title: 'Benvenuto nella Dashboard di Gest-e! üëã',
        description: 'La Dashboard √® il cuore pulsante del sistema gestionale Gest-e. Da qui avrai una visione completa e in tempo reale di tutte le attivit√† aziendali: cantieri attivi, stato della sicurezza, scadenze imminenti, task in corso e molto altro. Questa schermata √® progettata per darti immediatamente le informazioni pi√π critiche senza dover navigare in profondit√† nel sistema. Ogni elemento √® cliccabile e ti porter√† alla sezione dettagliata corrispondente.',
        position: 'center',
        route: '/dashboard',
      },
      {
        id: 'stat-cards',
        title: 'üìä Pannello Statistiche Rapide',
        description: 'Queste card statistiche rappresentano i KPI (Key Performance Indicators) pi√π importanti per la tua operativit√† quotidiana. Ogni card mostra un conteggio aggiornato in tempo reale:\n\n‚Ä¢ **Commesse Attive**: numero di cantieri attualmente in corso\n‚Ä¢ **Task da Completare**: attivit√† assegnate ancora aperte\n‚Ä¢ **Alert Sicurezza**: lavoratori o imprese con documenti critici\n‚Ä¢ **Scadenze Imminenti**: documenti in scadenza nei prossimi 30 giorni\n\nCliccando su qualsiasi card verrai portato direttamente alla sezione dettagliata con filtri pre-applicati. Ad esempio, cliccando su "Alert Sicurezza" vedrai immediatamente l\'elenco delle criticit√† da risolvere.',
        targetSelector: '[data-tutorial="stat-cards"]',
        position: 'bottom',
        highlightPadding: 15,
      },
      {
        id: 'sidebar',
        title: 'üìÇ Menu Laterale di Navigazione',
        description: 'Il menu laterale √® organizzato in sezioni logiche che riflettono i reparti aziendali:\n\n‚Ä¢ **Principale**: Dashboard, Progetti, Business Intelligence\n‚Ä¢ **Commesse**: Gestione cantieri, SAL, Rapportini\n‚Ä¢ **Sicurezza & HSE**: Formazione, DPI, Visite Mediche, Check-in, Lavoratori, Imprese\n‚Ä¢ **Commerciale**: CRM, Preventivi, Listino Prezzi\n‚Ä¢ **Amministrazione**: Computo Metrico, Fatture, Note Spesa\n‚Ä¢ **Logistica**: Risorse/Mezzi, Magazzino, DDT\n‚Ä¢ **Conformit√†**: GDPR, ISO 9001, ISO 14001, D.Lgs 81/08\n\nOgni sezione √® collassabile per una navigazione pi√π pulita. Puoi personalizzare quali voci visualizzare andando in Impostazioni ‚Üí Menu.',
        targetSelector: '[data-tutorial="sidebar"]',
        position: 'right',
      },
      {
        id: 'search',
        title: 'üîç Ricerca Globale Intelligente (Ctrl+K)',
        description: 'La ricerca globale √® una delle funzionalit√† pi√π potenti di Gest-e. Premi **Ctrl+K** (oppure **‚åò+K** su Mac) in qualsiasi momento per aprire la barra di ricerca.\n\nPuoi cercare:\n‚Ä¢ **Commesse/Cantieri**: per nome, codice, citt√†\n‚Ä¢ **Lavoratori**: per nome, cognome, codice fiscale\n‚Ä¢ **Imprese**: per ragione sociale, partita IVA\n‚Ä¢ **Documenti**: per tipo, titolo\n‚Ä¢ **Task**: per titolo, descrizione\n\nLa ricerca √® fuzzy, quindi funziona anche con errori di battitura parziali. I risultati mostrano anche lo stato (attivo/scaduto) e permettono accesso diretto alla scheda dettaglio.',
        targetSelector: '[data-tutorial="global-search"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'notifications',
        title: 'üîî Centro Notifiche e Alert',
        description: 'L\'icona campanella nel header mostra tutte le notifiche del sistema. Il badge numerico indica quante notifiche non lette ci sono.\n\nTipi di notifiche:\n‚Ä¢ **Scadenze Documenti**: formazioni, visite mediche, DURC, Visura in scadenza\n‚Ä¢ **Task Assegnate**: nuove task create e assegnate a te\n‚Ä¢ **Alert Critici**: documenti scaduti che richiedono azione immediata\n‚Ä¢ **Promemoria**: eventi programmati nel calendario\n\nCliccando sulla campanella si apre il pannello notifiche con dettagli e azioni rapide. Puoi configurare quali notifiche ricevere (anche via email) nelle Impostazioni ‚Üí Notifiche.',
        targetSelector: '[data-tutorial="notifications"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'critical-alerts',
        title: '‚ö†Ô∏è Sistema di Alert Critici',
        description: 'Quando ci sono situazioni critiche che richiedono attenzione immediata, vedrai un badge rosso con il conteggio degli alert. Gli alert critici includono:\n\nüî¥ **Documenti Scaduti**: formazioni, visite mediche o documenti aziendali gi√† scaduti\nüî¥ **Lavoratori Non Idonei**: personale senza idoneit√† sanitaria valida\nüî¥ **Imprese Non Conformi**: subappaltatori con DURC o documentazione scaduta\nüî¥ **Scadenze Superate**: deadline di progetto o contrattuali non rispettate\n\n**IMPORTANTE**: Non ignorare mai gli alert critici! Possono comportare sanzioni in caso di ispezione ASL/DTL e responsabilit√† penali per il datore di lavoro ai sensi del D.Lgs 81/08.',
        targetSelector: '[data-tutorial="critical-alerts"]',
        position: 'bottom',
      },
      {
        id: 'user-menu',
        title: 'üë§ Menu Utente e Profilo',
        description: 'Cliccando sul tuo nome/avatar in alto a destra accedi al menu utente:\n\n‚Ä¢ **Profilo**: visualizza e modifica i tuoi dati personali, foto, firma digitale\n‚Ä¢ **Impostazioni**: configura preferenze, notifiche, tema, moduli visibili\n‚Ä¢ **Azienda**: dati anagrafici aziendali per intestazione documenti\n‚Ä¢ **Logout**: esci dalla sessione corrente\n\nIl profilo utente √® importante perch√© il tuo nome apparir√† come autore nei rapportini, check-in e documenti che generi. Assicurati che sia compilato correttamente.',
        targetSelector: '[data-tutorial="user-menu"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'theme-toggle',
        title: 'üåô Tema Chiaro/Scuro',
        description: 'Gest-e supporta due temi visivi:\n\n‚òÄÔ∏è **Tema Chiaro**: ideale per ambienti luminosi, ufficio con luce naturale\nüåô **Tema Scuro**: riduce l\'affaticamento visivo in condizioni di scarsa illuminazione, consigliato per uso serale\n\nClicca sull\'icona sole/luna per passare da un tema all\'altro. La preferenza viene salvata e mantenuta al prossimo accesso. Puoi anche impostare il tema automatico basato sull\'ora nelle Impostazioni.',
        targetSelector: '[data-tutorial="theme-toggle"]',
        position: 'bottom',
      },
      {
        id: 'mobile-responsive',
        title: 'üì± Utilizzo da Mobile',
        description: 'Gest-e √® completamente responsive e utilizzabile da smartphone e tablet. Su dispositivi mobili:\n\n‚Ä¢ Il menu laterale diventa un drawer accessibile con l\'icona hamburger\n‚Ä¢ Le tabelle si adattano con scroll orizzontale\n‚Ä¢ I form sono ottimizzati per touch\n‚Ä¢ Puoi fare check-in direttamente dal cantiere con il telefono\n‚Ä¢ Le foto per i rapportini possono essere scattate direttamente dalla fotocamera\n\nConsigliamo l\'uso da desktop per attivit√† amministrative complesse, mentre mobile √® perfetto per operazioni sul campo.',
        position: 'center',
      },
      {
        id: 'complete',
        title: 'Perfetto! Ora conosci la Dashboard! ‚ú®',
        description: 'Hai completato il tour della Dashboard di Gest-e! Ricapitolando:\n\n‚úÖ Le card statistiche mostrano i KPI in tempo reale\n‚úÖ Il menu laterale √® organizzato per reparti aziendali\n‚úÖ Ctrl+K apre la ricerca globale da qualsiasi pagina\n‚úÖ La campanella mostra notifiche e alert\n‚úÖ Gli alert rossi sono critici e vanno risolti subito\n‚úÖ Il menu utente gestisce profilo e impostazioni\n\nOra esplora gli altri tutorial per approfondire ogni singolo modulo. Ti consigliamo di partire con "Come Creare una Commessa" se gestisci cantieri.',
        position: 'center',
      },
    ],
  },
  {
    id: 'projects-kanban',
    title: 'Gestione Progetti con Kanban e Timeline',
    description: 'Impara a gestire task e progetti con board Kanban drag & drop, vista tabella con filtri avanzati, timeline Gantt per pianificazione temporale e calendario interattivo',
    icon: 'FolderKanban',
    estimatedTime: '6 minuti',
    category: 'principale',
    steps: [
      {
        id: 'intro',
        title: 'Il Modulo Progetti di Gest-e üìã',
        description: 'Il modulo Progetti √® lo strumento centrale per la gestione delle attivit√† operative. A differenza di un semplice to-do list, offre:\n\n‚Ä¢ **Board Kanban**: visualizzazione visuale con drag & drop\n‚Ä¢ **Vista Tabella**: filtri avanzati, ordinamento, bulk actions\n‚Ä¢ **Timeline Gantt**: pianificazione temporale con dipendenze\n‚Ä¢ **Calendario**: vista mensile delle scadenze\n\nOgni task pu√≤ essere collegata a una commessa, assegnata a un responsabile, prioritizzata e tracciata nel tempo. Le task possono anche avere allegati (foto, documenti) e note di aggiornamento.',
        position: 'center',
      },
      {
        id: 'nav-progetti',
        title: 'Accesso al Modulo Progetti',
        description: 'Per accedere ai Progetti, clicca sulla voce "Progetti" nel menu laterale, sezione "Principale". Puoi anche usare la scorciatoia da tastiera o la ricerca globale (Ctrl+K ‚Üí digita "progetti").',
        targetSelector: '[data-tutorial="nav-progetti"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'progetti-page',
        title: 'Panoramica Pagina Progetti',
        description: 'Questa √® la pagina principale del modulo Progetti. In alto trovi:\n\n‚Ä¢ **Statistiche rapide**: totale task, completate, in corso, bloccate\n‚Ä¢ **Filtri**: per commessa, assegnatario, priorit√†, stato\n‚Ä¢ **Ricerca**: cerca task per titolo o descrizione\n‚Ä¢ **Selettore Vista**: passa tra Kanban, Tabella, Timeline, Calendario\n‚Ä¢ **Pulsante Nuova Task**: crea rapidamente nuove attivit√†\n\nLe viste sono sincronizzate: modificando una task in Kanban, la vedrai aggiornata anche in Tabella e Timeline.',
        route: '/progetti',
        position: 'center',
      },
      {
        id: 'view-tabs',
        title: 'üëÅÔ∏è Le Quattro Viste Disponibili',
        description: 'Scegli la vista pi√π adatta al tuo modo di lavorare:\n\nüìä **Kanban**: ideale per il workflow quotidiano. Trascina le card tra le colonne per aggiornare lo stato. Perfetto per stand-up meeting e gestione agile.\n\nüìã **Tabella**: vista compatta con tutte le informazioni. Ordina per qualsiasi colonna, filtra combinando criteri, esporta in Excel.\n\nüìà **Timeline/Gantt**: visualizza le task su un asse temporale. Identifica sovrapposizioni, ritardi, dipendenze. Indispensabile per la pianificazione.\n\nüìÖ **Calendario**: vedi le scadenze in formato mensile. Clicca su un giorno per creare una task con quella data.',
        targetSelector: '[data-tutorial="view-tabs"]',
        position: 'bottom',
      },
      {
        id: 'kanban-columns',
        title: 'üìä Le Colonne del Kanban',
        description: 'Il Kanban √® organizzato in colonne che rappresentano gli stati del workflow:\n\nüì• **Da Fare**: task create ma non ancora iniziate\nüîÑ **In Corso**: task su cui qualcuno sta lavorando attivamente\nüëÄ **In Revisione**: completate ma in attesa di verifica/approvazione\n‚úÖ **Fatto**: task completate e approvate\nüö´ **Bloccato**: task ferme per impedimenti esterni\n\n**Come usarlo**: Trascina le card da una colonna all\'altra. Il numero in alto indica quante task ci sono. Il bordo colorato della card indica la priorit√† (rosso=urgente, arancione=alta, blu=normale, grigio=bassa).',
        targetSelector: '[data-tutorial="kanban-columns"]',
        position: 'top',
      },
      {
        id: 'new-task',
        title: '‚ûï Creare una Nuova Task',
        description: 'Clicca su "Nuova Task" per aprire il form di creazione. I campi disponibili:\n\nüìå **Titolo** (obbligatorio): breve descrizione dell\'attivit√†\nüìù **Descrizione**: dettagli, istruzioni, contesto\nüèóÔ∏è **Commessa**: collega la task a un cantiere specifico\nüë§ **Assegnatario**: chi deve eseguire l\'attivit√†\n‚ö° **Priorit√†**: Urgente, Alta, Normale, Bassa\nüìÖ **Data Inizio/Fine**: per la pianificazione temporale\nüìé **Allegati**: documenti, foto, file correlati\nüìí **Note**: aggiornamenti progressivi sull\'avanzamento\n\n**Consiglio**: Sii specifico nel titolo. Invece di "Lavori cantiere" scrivi "Completare getto fondazioni Lotto 3".',
        targetSelector: '[data-tutorial="btn-new-task"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'task-card',
        title: 'üé´ Anatomia di una Task Card',
        description: 'Ogni card nel Kanban mostra informazioni chiave:\n\n‚Ä¢ **Bordo colorato a sinistra**: indica la priorit√†\n  - üî¥ Rosso = Urgente\n  - üü† Arancione = Alta\n  - üîµ Blu = Normale\n  - ‚ö™ Grigio = Bassa\n\n‚Ä¢ **Titolo**: cliccabile per aprire i dettagli\n‚Ä¢ **Etichetta Commessa**: se collegata a un cantiere\n‚Ä¢ **Data Scadenza**: con icona calendario, diventa rossa se scaduta\n‚Ä¢ **Avatar Assegnatario**: chi √® responsabile\n‚Ä¢ **Contatore Allegati**: quanti file sono allegati\n\nClicca sulla card per aprire il pannello dettagli completo dove puoi modificare tutti i campi e aggiungere note.',
        targetSelector: '[data-tutorial="task-card"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'gantt-view',
        title: 'üìà La Vista Timeline/Gantt',
        description: 'La Timeline Gantt mostra le task su un asse temporale:\n\n‚Ä¢ **Asse orizzontale**: giorni/settimane/mesi\n‚Ä¢ **Barre colorate**: durata di ogni task (dalla data inizio alla fine)\n‚Ä¢ **Colore barra**: riflette la priorit√†\n‚Ä¢ **Stato completamento**: percentuale di avanzamento\n\n**Funzionalit√† avanzate**:\n- Zoom: ingrandisci per vedere i giorni, rimpicciolisci per una vista trimestrale\n- Oggi: linea verticale rossa indica la data odierna\n- Drag & Drop: puoi spostare le barre per ripianificare\n- Dipendenze: visualizza quali task dipendono da altre\n\nQuesta vista √® fondamentale per i Project Manager per identificare colli di bottiglia e ritardi.',
        targetSelector: '[data-tutorial="gantt-view"]',
        position: 'top',
      },
      {
        id: 'filters-search',
        title: 'üîç Filtri e Ricerca Avanzata',
        description: 'Usa i filtri per trovare rapidamente le task che ti interessano:\n\n‚Ä¢ **Per Commessa**: mostra solo le task di un cantiere specifico\n‚Ä¢ **Per Assegnatario**: le task assegnate a una persona\n‚Ä¢ **Per Priorit√†**: filtra per urgenza\n‚Ä¢ **Per Stato**: solo quelle in corso, bloccate, ecc.\n‚Ä¢ **Per Data**: scadute, in scadenza questa settimana, questo mese\n\nI filtri sono combinabili: puoi cercare "task urgenti del cantiere X assegnate a Mario scadute questa settimana".\n\nLa barra di ricerca cerca nel titolo e nella descrizione con ricerca fuzzy.',
        targetSelector: '[data-tutorial="filters-progetti"]',
        position: 'bottom',
      },
      {
        id: 'export-excel',
        title: 'üì§ Esportazione in Excel',
        description: 'Puoi esportare le task in formato Excel per:\n\n‚Ä¢ Report settimanali/mensili al management\n‚Ä¢ Condivisione con stakeholder esterni\n‚Ä¢ Analisi in fogli di calcolo\n‚Ä¢ Backup dei dati\n\nL\'export include tutti i campi: titolo, descrizione, stato, priorit√†, date, assegnatario, commessa. I filtri attivi vengono applicati anche all\'export, cos√¨ puoi esportare solo le task filtrate.',
        targetSelector: '[data-tutorial="export-progetti"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'complete',
        title: 'Ottimo Lavoro! Sei un Pro del Kanban! üéâ',
        description: 'Hai completato il tutorial sulla gestione progetti! Ricorda:\n\n‚úÖ Usa il Kanban per il lavoro quotidiano con drag & drop\n‚úÖ La Tabella √® perfetta per filtri e analisi\n‚úÖ La Timeline/Gantt mostra la pianificazione temporale\n‚úÖ Il Calendario visualizza le scadenze mensili\n‚úÖ I filtri ti aiutano a trovare rapidamente le task\n‚úÖ L\'export Excel genera report pronti\n\n**Best Practice**: Aggiorna lo stato delle task ogni giorno. Un Kanban aggiornato √® uno strumento potente per il team!',
        position: 'center',
      },
    ],
  },

  // ==================== CATEGORIA: COMMESSE ====================
  {
    id: 'create-commessa',
    title: 'Come Creare una Nuova Commessa',
    description: 'Guida completa passo-passo: creazione anagrafica cantiere, dati committente, importo contratto, date, figure responsabili (DL, CSP, CSE), e collegamento con imprese e lavoratori',
    icon: 'Briefcase',
    estimatedTime: '8 minuti',
    category: 'commesse',
    steps: [
      {
        id: 'intro',
        title: 'Cos\'√® una Commessa in Gest-e? üèóÔ∏è',
        description: 'La **Commessa** (o Cantiere) √® l\'entit√† centrale di Gest-e attorno alla quale ruota tutta la gestione operativa. Una commessa rappresenta un progetto/lavoro con:\n\n‚Ä¢ **Anagrafica**: nome, codice, indirizzo, committente\n‚Ä¢ **Dati Economici**: importo contratto, SAL, fatturazione\n‚Ä¢ **Figure Responsabili**: Direttore Lavori, CSP, CSE\n‚Ä¢ **Entit√† Collegate**: imprese subappaltatrici, lavoratori, documenti\n‚Ä¢ **Tempistiche**: data inizio, fine prevista, stato avanzamento\n\nCreare correttamente una commessa fin dall\'inizio ti permetter√† di avere:\n- Tracciabilit√† documentale completa\n- Contabilit√† lavori separata per cantiere\n- Report e statistiche per commessa\n- Compliance sicurezza con storico',
        position: 'center',
      },
      {
        id: 'nav-cantieri',
        title: 'Naviga verso la Sezione Commesse',
        description: 'Per accedere alla gestione delle commesse, clicca sulla voce **"Commesse"** nel menu laterale, all\'interno della sezione "Commesse".\n\nPuoi anche:\n‚Ä¢ Usare la ricerca globale (Ctrl+K) e digitare "commesse" o "cantieri"\n‚Ä¢ Cliccare sulla card "Commesse Attive" nella Dashboard\n\nLa sezione Commesse contiene anche: SAL (Stato Avanzamento Lavori), Rapportini, Timbrature.',
        targetSelector: '[data-tutorial="nav-cantieri"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'cantieri-page',
        title: 'La Pagina Elenco Commesse',
        description: 'Questa √® la pagina principale delle commesse. Ogni commessa √® mostrata come una **card** con:\n\n‚Ä¢ **Semaforo Stato**: üü¢ Attivo / üü° Sospeso / ‚ö´ Completato\n‚Ä¢ **Nome e Codice**: identificativi della commessa\n‚Ä¢ **Committente**: nome del cliente\n‚Ä¢ **Importo Contratto**: valore economico\n‚Ä¢ **Barra Avanzamento**: percentuale SAL completato\n‚Ä¢ **Date**: inizio e fine prevista\n‚Ä¢ **Alert**: badge rosso se ci sono documenti critici\n\nLe card sono cliccabili per accedere al dettaglio completo della commessa.',
        route: '/cantieri',
        position: 'center',
      },
      {
        id: 'filter-status',
        title: 'üîç Filtrare le Commesse',
        description: 'In alto trovi i filtri per visualizzare solo le commesse che ti interessano:\n\n‚Ä¢ **Tutti**: mostra tutte le commesse\n‚Ä¢ **Attivi**: cantieri in corso (stato operativo)\n‚Ä¢ **Sospesi**: cantieri temporaneamente fermi\n‚Ä¢ **Completati**: lavori conclusi (archivio)\n\n**Ricerca testuale**: cerca per nome, codice commessa, citt√† o committente.\n\n**Ordinamento**: ordina per nome, data inizio, importo, stato.\n\nQuesti filtri sono utili quando hai molte commesse e devi trovarne rapidamente una specifica.',
        targetSelector: '[data-tutorial="filter-status"]',
        position: 'bottom',
      },
      {
        id: 'click-new',
        title: '‚ûï Crea una Nuova Commessa',
        description: 'Clicca sul pulsante **"Nuova Commessa"** (o "Nuovo Cantiere") in alto a destra per aprire il modulo di creazione.\n\nIl modulo ti guider√† attraverso tutti i campi necessari per creare un\'anagrafica completa.\n\n**Nota**: I campi contrassegnati con asterisco (*) sono obbligatori. Si consiglia comunque di compilare tutti i campi disponibili per avere una gestione completa fin dall\'inizio.',
        targetSelector: '[data-tutorial="btn-nuovo-cantiere"]',
        position: 'bottom',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'fill-form-intro',
        title: 'üìù Il Modulo di Creazione Commessa',
        description: 'Il form √® organizzato in sezioni logiche:\n\n**1. Dati Identificativi**\n- Nome Commessa\n- Codice Commessa\n\n**2. Dati Committente**\n- Nome/Ragione Sociale Committente\n\n**3. Ubicazione**\n- Indirizzo, Citt√†, Provincia, CAP\n\n**4. Date e Importo**\n- Data Inizio, Data Fine Prevista\n- Importo Contratto\n\n**5. Figure Responsabili**\n- Direttore Lavori (DL)\n- CSP (Coordinatore Sicurezza Progettazione)\n- CSE (Coordinatore Sicurezza Esecuzione)\n- Responsabile Sicurezza\n\n**6. Note**\n- Campo libero per annotazioni',
        targetSelector: '[data-tutorial="form-cantiere"]',
        position: 'left',
        highlightPadding: 20,
      },
      {
        id: 'field-nome',
        title: 'üìå Campo: Nome Commessa',
        description: 'Il **Nome Commessa** √® l\'identificativo descrittivo che apparir√† ovunque nel sistema.\n\n**Best Practices per la denominazione**:\n‚úÖ Usa nomi descrittivi e univoci\n‚úÖ Includi il tipo di lavoro e/o localit√†\n‚úÖ Evita abbreviazioni poco chiare\n\n**Esempi corretti**:\n‚Ä¢ "Ristrutturazione Villa Rossi - Via Roma 15"\n‚Ä¢ "Nuovo Capannone Industriale - Zona Artigianale"\n‚Ä¢ "Manutenzione Straordinaria Condominio Aurora"\n\n**Esempi da evitare**:\n‚Ä¢ "Cantiere 1" (troppo generico)\n‚Ä¢ "RVR15" (incomprensibile)\n‚Ä¢ "Lavori" (non identificativo)',
        targetSelector: '[data-tutorial="field-nome"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'field-codice',
        title: 'üî¢ Campo: Codice Commessa',
        description: 'Il **Codice Commessa** √® un identificativo univoco alfanumerico che apparir√† in tutti i documenti ufficiali: SAL, DDT, rapportini, fatture.\n\n**Formato consigliato**: [Prefisso]-[Anno]-[Numero progressivo]\n\n**Esempi**:\n‚Ä¢ COM-2025-001\n‚Ä¢ CANT-25-0042\n‚Ä¢ PRJ-2025-A15\n\n**Perch√© √® importante**:\n- Permette di identificare rapidamente la commessa nei documenti\n- Facilita l\'archiviazione e la ricerca\n- √à spesso richiesto dal committente per la fatturazione\n- Viene usato per la contabilit√† separata per commessa\n\n**Nota**: Il codice deve essere univoco nel sistema. Gest-e ti avviser√† se provi a inserire un codice gi√† esistente.',
        targetSelector: '[data-tutorial="field-codice"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'field-committente',
        title: 'üè¢ Campo: Committente',
        description: 'Il **Committente** √® il cliente che ha commissionato i lavori. Questo dato √® fondamentale per:\n\n‚Ä¢ **Fatturazione**: i dati del committente saranno usati per emettere fatture\n‚Ä¢ **Documentazione ufficiale**: apparir√† su SAL, certificati, verbali\n‚Ä¢ **Contratti**: riferimento per il contratto di appalto\n\n**Cosa inserire**:\n- Per aziende: Ragione Sociale completa\n- Per privati: Nome e Cognome\n\n**Esempi**:\n‚Ä¢ "Costruzioni Edili Bianchi S.r.l."\n‚Ä¢ "Comune di Milano - Settore Lavori Pubblici"\n‚Ä¢ "Mario Rossi"\n\n**Consiglio**: Puoi collegare il committente alla rubrica Contatti per avere automaticamente tutti i dati fiscali.',
        targetSelector: '[data-tutorial="field-committente"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'field-indirizzo',
        title: 'üìç Campi: Ubicazione Cantiere',
        description: 'L\'indirizzo completo del cantiere √® importante per molteplici scopi:\n\n**Campi da compilare**:\n‚Ä¢ **Indirizzo**: Via/Piazza e numero civico\n‚Ä¢ **Citt√†**: Comune dove si trova il cantiere\n‚Ä¢ **Provincia**: sigla provincia (es. MI, RM, NA)\n‚Ä¢ **CAP**: codice di avviamento postale\n\n**A cosa servono questi dati**:\n‚úÖ Compilazione automatica DDT (luogo di destinazione)\n‚úÖ Check-in con geolocalizzazione\n‚úÖ Documentazione di cantiere\n‚úÖ Comunicazioni agli enti (ASL, DTL)\n‚úÖ Logistica e pianificazione percorsi\n\n**Consiglio**: Inserisci l\'indirizzo esatto. Se il cantiere √® grande, specifica nelle note i punti di accesso.',
        targetSelector: '[data-tutorial="field-indirizzo"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'field-date',
        title: 'üìÖ Campi: Date Inizio e Fine',
        description: 'Le date sono fondamentali per la pianificazione e il monitoraggio:\n\n**Data Inizio Lavori**\n‚Ä¢ Quando iniziano effettivamente i lavori in cantiere\n‚Ä¢ Serve per calcolare la durata effettiva\n‚Ä¢ Punto di partenza per la Timeline/Gantt\n\n**Data Fine Prevista**\n‚Ä¢ Scadenza contrattuale prevista\n‚Ä¢ Usata per calcolare giorni residui e ritardi\n‚Ä¢ Genera alert se si avvicina senza completamento\n\n**Dove vengono usate queste date**:\n- Dashboard: calcolo % avanzamento temporale\n- Gantt: visualizzazione barra durata commessa\n- Scadenzario: alert commesse in scadenza\n- Report: analisi tempi di consegna\n\n**Consiglio**: Aggiorna la data fine effettiva quando il cantiere viene completato.',
        targetSelector: '[data-tutorial="field-date"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'field-importo',
        title: 'üí∞ Campo: Importo Contratto',
        description: 'L\'**Importo Contratto** √® il valore economico totale dell\'appalto/commessa.\n\n**Formato**: Inserisci solo il numero (es. 150000), senza euro o punti delle migliaia.\n\n**A cosa serve l\'importo**:\n\nüìä **SAL (Stato Avanzamento Lavori)**\n- Calcolo percentuale: importo fatturato √∑ importo contratto\n- Visualizzazione grafico previsto vs consuntivo\n\nüìà **Business Intelligence**\n- Valore totale commesse attive\n- Fatturato medio per cantiere\n- Analisi margini\n\nüìë **Fatturazione**\n- Verifica che la fatturazione non superi l\'importo contrattuale\n- Alert al raggiungimento del 100%\n\n**Per varianti e supplementi**: Aggiorna l\'importo quando ci sono varianti contrattuali approvate.',
        targetSelector: '[data-tutorial="field-importo"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'field-responsabile',
        title: 'üë∑ Campi: Figure Responsabili',
        description: 'Le figure professionali responsabili della commessa secondo normativa:\n\n**Direttore Lavori (DL)**\n‚Ä¢ Sovrintende all\'esecuzione dei lavori\n‚Ä¢ Verifica conformit√† al progetto\n‚Ä¢ Emette ordini di servizio\n\n**CSP - Coordinatore Sicurezza Progettazione**\n‚Ä¢ Redige il PSC (Piano Sicurezza Coordinamento)\n‚Ä¢ Obbligatorio per cantieri con pi√π imprese\n‚Ä¢ Nominato dal committente in fase di progetto\n\n**CSE - Coordinatore Sicurezza Esecuzione**\n‚Ä¢ Coordina l\'applicazione delle misure di sicurezza\n‚Ä¢ Verifica l\'applicazione del PSC\n‚Ä¢ Pu√≤ sospendere i lavori per pericolo grave\n\n**Responsabile Sicurezza Aziendale**\n‚Ä¢ RSPP interno o del cantiere\n‚Ä¢ Riferimento per la sicurezza operativa\n\n**Nota legale**: Queste figure sono previste dal D.Lgs 81/08. La loro nomina √® obbligatoria.',
        targetSelector: '[data-tutorial="field-responsabile"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'save-form',
        title: 'üíæ Salva la Nuova Commessa',
        description: 'Quando hai completato tutti i campi, clicca su **"Crea Cantiere"** per salvare.\n\n**Prima del salvataggio il sistema verifica**:\n‚úÖ Campi obbligatori compilati\n‚úÖ Codice commessa univoco\n‚úÖ Date coerenti (inizio < fine)\n‚úÖ Importo valido\n\n**Dopo il salvataggio**:\n- La commessa apparir√† nell\'elenco\n- Potrai accedere al dettaglio cliccandoci sopra\n- Da l√¨ potrai: assegnare imprese, aggiungere lavoratori, caricare documenti, registrare SAL\n\n**In caso di errore**: verr√† mostrato un messaggio con l\'indicazione del campo da correggere.',
        targetSelector: '[data-tutorial="btn-salva-cantiere"]',
        position: 'top',
        action: 'hover',
      },
      {
        id: 'complete',
        title: 'Complimenti! Commessa Creata con Successo! üéâ',
        description: 'Hai imparato a creare una commessa completa! Ecco cosa fare dopo:\n\n**Prossimi passi consigliati**:\n1. üè¢ **Assegna le Imprese**: aggiungi i subappaltatori che lavoreranno\n2. üë∑ **Assegna i Lavoratori**: indica chi operer√† nel cantiere\n3. üìÑ **Carica i Documenti**: POS, autorizzazioni, permessi\n4. üí∞ **Registra il Budget**: prevedi i costi per categoria\n5. ‚úÖ **Crea le Prime Task**: attivit√† iniziali di cantiere\n\n**Tutorial correlati da seguire**:\n‚Ä¢ "Gestire il Dettaglio Commessa"\n‚Ä¢ "Gestione SAL - Avanzamento Lavori"\n‚Ä¢ "Gestione Imprese Esterne"\n\nOra la tua commessa √® pronta per essere operativa!',
        position: 'center',
      },
    ],
  },
  {
    id: 'manage-commessa-detail',
    title: 'Gestione Completa del Dettaglio Commessa',
    description: 'Come navigare e utilizzare tutte le funzionalit√† del dettaglio commessa: panoramica, assegnazione imprese e lavoratori, upload documenti, SAL, rapportini e budget',
    icon: 'FileText',
    estimatedTime: '7 minuti',
    category: 'commesse',
    steps: [
      {
        id: 'intro',
        title: 'Il Dettaglio Commessa: Centro di Controllo üìã',
        description: 'La pagina **Dettaglio Commessa** √® il centro di controllo operativo di ogni cantiere. Da qui gestisci:\n\n‚Ä¢ **Panoramica**: dati anagrafici, stato, KPI\n‚Ä¢ **Imprese**: subappaltatori assegnati\n‚Ä¢ **Lavoratori**: personale operante\n‚Ä¢ **Documenti**: POS, PSC, autorizzazioni\n‚Ä¢ **SAL**: stati avanzamento lavori\n‚Ä¢ **Rapportini**: giornale lavori\n‚Ä¢ **Budget**: previsione costi\n\nOgni tab ha funzionalit√† specifiche che ti permettono di avere una visione completa e di gestire ogni aspetto del cantiere senza uscire dalla pagina.',
        position: 'center',
      },
      {
        id: 'nav-cantieri',
        title: 'Accedi alla Lista Commesse',
        description: 'Per prima cosa, vai alla lista delle commesse cliccando su "Commesse" nel menu laterale.',
        targetSelector: '[data-tutorial="nav-cantieri"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1000,
      },
      {
        id: 'select-cantiere',
        title: 'üëÜ Seleziona una Commessa',
        description: 'Clicca su una delle card commessa nell\'elenco per aprire la pagina di dettaglio.\n\nPuoi scegliere qualsiasi commessa. Per questo tutorial, selezionane una attiva per vedere tutte le funzionalit√†.\n\n**Suggerimento**: Usa i filtri in alto se hai molte commesse per trovare rapidamente quella che cerchi.',
        route: '/cantieri',
        targetSelector: '[data-tutorial="cantiere-card"]',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'detail-header',
        title: 'üìä L\'Intestazione della Commessa',
        description: 'La parte superiore della pagina mostra le informazioni chiave:\n\n‚Ä¢ **Nome e Codice**: identificativi della commessa\n‚Ä¢ **Stato**: Attivo üü¢ / Sospeso üü° / Completato ‚ö´ (modificabile)\n‚Ä¢ **Committente**: nome del cliente\n‚Ä¢ **Importo**: valore del contratto\n‚Ä¢ **Date**: inizio e fine prevista\n‚Ä¢ **Barra Avanzamento SAL**: percentuale lavori fatturati\n\n**Azioni rapide disponibili**:\n- üìù Modifica dati anagrafici\n- üîÑ Cambia stato (Sospendi/Completa/Riattiva)\n- üì§ Esporta scheda commessa in PDF\n- üóëÔ∏è Archivia/Elimina (se completata)',
        targetSelector: '[data-tutorial="detail-header"]',
        position: 'bottom',
      },
      {
        id: 'tabs-navigation',
        title: 'üìë I Tab di Navigazione',
        description: 'Sotto l\'intestazione trovi i tab per accedere alle diverse sezioni:\n\nüìã **Panoramica**: riepilogo generale, KPI, widget statistici\nüè¢ **Imprese**: subappaltatori assegnati alla commessa\nüë∑ **Lavoratori**: personale che opera in cantiere\nüìÑ **Documenti**: tutti i file e documenti del cantiere\nüìà **SAL**: stati avanzamento lavori registrati\nüìù **Rapportini**: giornale lavori giornaliero\nüí∞ **Budget**: previsione e consuntivo costi\n\nClicca su ogni tab per accedere alla sezione corrispondente. Il numero nel badge indica quanti elementi ci sono (es. "5" su Imprese = 5 imprese assegnate).',
        targetSelector: '[data-tutorial="detail-tabs"]',
        position: 'bottom',
      },
      {
        id: 'tab-imprese',
        title: 'üè¢ Tab Imprese Assegnate',
        description: 'Nella tab **Imprese** gestisci i subappaltatori del cantiere:\n\n**Visualizzi**:\n- Elenco imprese con ragione sociale e P.IVA\n- Ruolo nel cantiere (Appaltatore principale, Subappaltatore, ecc.)\n- Semaforo stato documenti üü¢üü°üî¥\n- Date assegnazione (da - a)\n- Importo subappalto\n\n**Azioni**:\n‚ûï **Aggiungi Impresa**: seleziona dall\'anagrafica o crea nuova\nüìÑ **Vedi Documenti**: DURC, Visura, Polizza, DUVRI\n‚úèÔ∏è **Modifica**: cambia ruolo, date, importo\nüóëÔ∏è **Rimuovi**: scollega l\'impresa dal cantiere\n\n**IMPORTANTE**: Non puoi assegnare un\'impresa con documenti scaduti (DURC, Visura). Risolvi prima le criticit√†.',
        targetSelector: '[data-tutorial="tab-imprese"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'tab-lavoratori',
        title: 'üë∑ Tab Lavoratori Assegnati',
        description: 'Nella tab **Lavoratori** gestisci il personale operante:\n\n**Per ogni lavoratore vedi**:\n- Nome, Cognome, Codice Fiscale\n- Mansione e Livello\n- Impresa di appartenenza\n- Semaforo compliance üü¢üü°üî¥ (formazioni, visite, DPI)\n- Date presenza in cantiere\n\n**Azioni**:\n‚ûï **Assegna Lavoratore**: seleziona dall\'anagrafica\nüìã **Vedi Scheda**: apri dettaglio con tutte le formazioni e visite\nüìÖ **Modifica Date**: aggiorna periodo di presenza\nüóëÔ∏è **Rimuovi**: scollega dal cantiere\n\n**Sistema a Semaforo**:\nüü¢ Verde: tutte le formazioni e visite in regola\nüü° Giallo: qualcosa in scadenza entro 30 giorni\nüî¥ Rosso: documenti scaduti - NON PU√í LAVORARE',
        targetSelector: '[data-tutorial="tab-lavoratori"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'tab-documenti',
        title: 'üìÑ Tab Documenti del Cantiere',
        description: 'Nella tab **Documenti** archivi tutta la documentazione:\n\n**Tipologie di documenti**:\nüìë POS - Piano Operativo di Sicurezza\nüìë PSC - Piano Sicurezza e Coordinamento\nüìë Autorizzazioni e Permessi\nüìë Verbali di Coordinamento\nüìë Ordini di Servizio\nüìë Comunicazioni Enti\nüìë Foto e Rilievi\n\n**Per ogni documento**:\n- Tipo, Titolo, Data caricamento\n- Stato: Valido, In scadenza, Scaduto\n- Preview e Download\n\n**Azioni**:\n‚ûï **Carica Documento**: upload PDF, immagini, Word, Excel\nüìù **Modifica**: aggiorna titolo, data scadenza\nüì• **Scarica**: download del file\nüóëÔ∏è **Elimina**: rimuovi (con conferma)\n\n**Consiglio**: Organizza i documenti per categoria per trovarli facilmente.',
        targetSelector: '[data-tutorial="tab-documenti"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'tab-sal',
        title: 'üìà Tab SAL - Stato Avanzamento Lavori',
        description: 'Nella tab **SAL** gestisci l\'avanzamento economico:\n\n**Visualizzi**:\n- Grafico Previsto vs Consuntivo (linee temporali)\n- Elenco SAL registrati con numero, data, importo\n- Percentuale di avanzamento\n- Scostamento budget\n\n**Per ogni SAL registri**:\n- Numero progressivo (es. SAL n.1, n.2...)\n- Data di emissione\n- Importo fatturato/certificato\n- Note e descrizione lavori\n\n**Funzionalit√†**:\n‚ûï **Nuovo SAL**: registra un nuovo stato avanzamento\nüì• **Import Excel**: carica SAL massivamente da file\nüì§ **Export**: esporta lo storico in Excel/PDF\nüìä **Grafico**: confronta avanzamento previsto vs reale\n\n**KPI calcolati automaticamente**:\n- % Avanzamento = Œ£ SAL √∑ Importo Contratto\n- Scostamento = Previsto - Consuntivo',
        targetSelector: '[data-tutorial="tab-sal"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'tab-rapportini',
        title: 'üìù Tab Rapportini (Giornale Lavori)',
        description: 'Nella tab **Rapportini** tieni il giornale di cantiere:\n\n**Ogni rapportino documenta**:\n- Data del rapportino\n- Condizioni meteo\n- Lavoratori presenti e ore lavorate\n- Lavorazioni eseguite\n- Materiali impiegati\n- Mezzi utilizzati\n- Note e segnalazioni\n- Foto allegato\n\n**Perch√© √® importante**:\n‚úÖ Tracciabilit√† completa di ogni giornata\n‚úÖ Base per la contabilit√† lavori\n‚úÖ Documentazione in caso di contestazioni\n‚úÖ Richiesto per appalti pubblici\n‚úÖ Utile per il Direttore Lavori\n\n**Azioni**:\n‚ûï **Nuovo Rapportino**: crea il report giornaliero\nüì§ **Esporta PDF**: genera documento firmabile\nüìä **Statistiche**: ore totali, materiali consumati',
        targetSelector: '[data-tutorial="tab-rapportini"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'tab-budget',
        title: 'üí∞ Tab Budget (Previsione Costi)',
        description: 'Nella tab **Budget** pianifichi e monitori i costi:\n\n**Struttura del budget per categorie**:\n- Manodopera\n- Materiali\n- Noli e Trasporti\n- Subappalti\n- Oneri Sicurezza\n- Imprevisti\n- Spese Generali\n\n**Per ogni voce**:\n- Importo Previsto (budget iniziale)\n- Importo Consuntivo (speso effettivamente)\n- Scostamento (Œî = Consuntivo - Previsto)\n- % di utilizzo budget\n\n**Analisi**:\nüìä Grafico a torta per categoria\nüìà Trend consumi nel tempo\n‚ö†Ô∏è Alert superamento budget\n\n**Collegamento automatico**:\nLe fatture passive collegate alla commessa aggiornano automaticamente il consuntivo.',
        targetSelector: '[data-tutorial="tab-budget"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'complete',
        title: 'Perfetto! Sei un Esperto del Dettaglio Commessa! ‚ú®',
        description: 'Ora conosci tutte le funzionalit√† del Dettaglio Commessa:\n\n‚úÖ **Panoramica**: visione d\'insieme e KPI\n‚úÖ **Imprese**: gestione subappaltatori con stato documenti\n‚úÖ **Lavoratori**: personale con verifica compliance\n‚úÖ **Documenti**: archivio digitale completo\n‚úÖ **SAL**: tracciamento avanzamento economico\n‚úÖ **Rapportini**: giornale lavori quotidiano\n‚úÖ **Budget**: controllo costi previsti vs consuntivi\n\n**Best Practice**: Tieni aggiornati i dati quotidianamente per avere sempre una visione accurata dello stato della commessa.\n\n**Prossimo tutorial consigliato**: "Gestione SAL - Avanzamento Lavori"',
        position: 'center',
      },
    ],
  },
  {
    id: 'sal-management',
    title: 'Gestione SAL (Stato Avanzamento Lavori)',
    description: 'Come creare SAL, importare dati da Excel, analizzare il grafico previsto vs consuntivo, e monitorare l\'avanzamento economico delle commesse',
    icon: 'TrendingUp',
    estimatedTime: '6 minuti',
    category: 'commesse',
    steps: [
      {
        id: 'intro',
        title: 'SAL - Stato Avanzamento Lavori üìà',
        description: 'Il **SAL (Stato Avanzamento Lavori)** √® il documento che certifica l\'avanzamento economico di un cantiere. Rappresenta il valore delle lavorazioni eseguite e certificate.\n\n**Perch√© √® fondamentale**:\n‚Ä¢ üí∞ Base per la fatturazione al committente\n‚Ä¢ üìä Misura l\'avanzamento reale vs pianificato\n‚Ä¢ üìã Documento ufficiale per la contabilit√† lavori\n‚Ä¢ ‚öñÔ∏è Prova in caso di contenzioso\n‚Ä¢ üè¶ Richiesto per anticipo/pagamento da banche\n\n**In Gest-e puoi**:\n- Creare SAL manuali\n- Importare da Excel\n- Confrontare previsto vs consuntivo\n- Generare report per il DL\n- Collegare a fatture emesse',
        position: 'center',
      },
      {
        id: 'nav-sal',
        title: 'Accedi alla Sezione SAL',
        description: 'Per accedere alla gestione SAL, vai nel menu laterale e clicca su **"SAL"** nella sezione Commesse.\n\nPuoi anche accedere dal dettaglio di una specifica commessa, tab "SAL".',
        targetSelector: '[data-tutorial="nav-sal"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'sal-page',
        title: 'La Pagina SAL',
        description: 'La pagina SAL mostra una panoramica di tutti gli avanzamenti lavori:\n\n**Vista principale**:\n- Elenco SAL con numero, data, commessa, importo\n- Grafico andamento temporale\n- Filtri per commessa\n\n**Per ogni SAL**:\n- N¬∞ progressivo (SAL 1, 2, 3...)\n- Data di emissione/certificazione\n- Importo certificato\n- % avanzamento cumulativo\n- Stato (Bozza, Emesso, Fatturato)\n\n**Statistiche globali**:\n- Totale fatturato su tutte le commesse\n- SAL medio per cantiere\n- Trend mensile/trimestrale',
        route: '/sal',
        position: 'center',
      },
      {
        id: 'filter-cantiere',
        title: 'üèóÔ∏è Filtrare per Commessa',
        description: 'Usa il **filtro Commessa** in alto per visualizzare i SAL di un solo cantiere.\n\n**Cosa succede quando filtri**:\n- L\'elenco mostra solo i SAL di quella commessa\n- Il grafico si aggiorna con la curva specifica\n- Le statistiche si ricalcolano\n\n**Grafico comparativo**:\nQuando selezioni una commessa, vedrai due linee:\nüìà **Linea Previsto**: avanzamento pianificato secondo cronoprogramma\nüìâ **Linea Consuntivo**: avanzamento reale basato sui SAL emessi\n\n**Interpretazione**:\n- Consuntivo sopra Previsto = anticipo üü¢\n- Consuntivo sotto Previsto = ritardo üî¥\n- Linee sovrapposte = on track üü¢',
        targetSelector: '[data-tutorial="filter-cantiere"]',
        position: 'bottom',
      },
      {
        id: 'chart-comparison',
        title: 'üìä Il Grafico Previsto vs Consuntivo',
        description: 'Il grafico √® lo strumento visivo per analizzare l\'andamento della commessa:\n\n**Asse X (orizzontale)**: Timeline temporale\n**Asse Y (verticale)**: Importo cumulativo in euro\n\n**Elementi del grafico**:\n- üîµ Linea Previsto: basata sul budget e cronoprogramma iniziale\n- üü¢ Linea Consuntivo: somma cumulativa dei SAL emessi\n- üìç Punto "Oggi": indica dove siamo nella timeline\n- üèÅ Punto "Fine": importo contratto target\n\n**Come usarlo**:\n1. Verifica se sei in anticipo o ritardo\n2. Identifica quando si √® creato lo scostamento\n3. Proietta l\'andamento futuro\n4. Prendi decisioni correttive se necessario\n\n**Alert automatici**:\n‚ö†Ô∏è Gest-e ti avvisa se il consuntivo √® sotto il 10% del previsto',
        targetSelector: '[data-tutorial="sal-chart"]',
        position: 'top',
      },
      {
        id: 'new-sal',
        title: '‚ûï Creare un Nuovo SAL',
        description: 'Clicca su **"Nuovo SAL"** per registrare uno stato avanzamento:\n\n**Campi del form**:\nüìå **Commessa** (obbligatorio): seleziona il cantiere\nüî¢ **Numero SAL**: progressivo automatico o manuale\nüìÖ **Data**: data di emissione/certificazione\nüí∞ **Importo**: valore delle lavorazioni certificate\nüìù **Descrizione**: dettaglio lavorazioni eseguite\nüìé **Allegati**: documenti di supporto, foto\n\n**Workflow tipico**:\n1. Il Direttore Lavori certifica le lavorazioni\n2. Si registra il SAL con l\'importo certificato\n3. Si emette la fattura collegata al SAL\n4. Il committente paga\n\n**Nota**: L\'importo cumulativo viene calcolato automaticamente sommando tutti i SAL precedenti.',
        targetSelector: '[data-tutorial="btn-new-sal"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'import-excel',
        title: 'üì• Import SAL da Excel',
        description: 'Se hai i dati SAL in un file Excel, puoi importarli massivamente:\n\n**Come funziona**:\n1. Clicca **"Importa da Excel"**\n2. Scarica il template con il formato corretto\n3. Compila il file con i tuoi dati\n4. Carica il file compilato\n5. Verifica l\'anteprima\n6. Conferma l\'importazione\n\n**Colonne richieste nel template**:\n- Codice Commessa\n- Numero SAL\n- Data\n- Importo\n- Descrizione\n\n**Vantaggi dell\'import**:\n‚úÖ Carica anni di storico in pochi minuti\n‚úÖ Migrazione da altri software\n‚úÖ Aggiornamento massivo\n‚úÖ Backup/restore dati',
        targetSelector: '[data-tutorial="btn-import-sal"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'export-report',
        title: 'üì§ Export Report SAL',
        description: 'Genera report professionali per stakeholder:\n\n**Formati disponibili**:\nüìä **Excel**: tabella dati per analisi\nüìÑ **PDF**: documento formattato con grafico\n\n**Contenuto del report**:\n- Intestazione con dati commessa\n- Tabella storico SAL\n- Grafico previsto vs consuntivo\n- Riepilogo: importo contratto, fatturato, residuo\n- Percentuale avanzamento\n- Previsione completamento\n\n**Uso tipico**:\n- Riunioni con il committente\n- Report mensili al management\n- Documentazione per banche/assicurazioni\n- Allegato alle fatture',
        targetSelector: '[data-tutorial="export-sal"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'complete',
        title: 'Ottimo! Ora Padroneggi i SAL! üéâ',
        description: 'Hai completato il tutorial sulla gestione SAL!\n\n**Ricapitolando**:\n‚úÖ I SAL certificano l\'avanzamento economico\n‚úÖ Il grafico confronta previsto vs consuntivo\n‚úÖ Puoi creare SAL manuali o importare da Excel\n‚úÖ L\'export genera report per gli stakeholder\n\n**Best Practices**:\nüìÜ Registra i SAL appena vengono certificati dal DL\nüìä Monitora settimanalmente il grafico per identificare scostamenti\nüîó Collega sempre i SAL alle fatture emesse\nüìù Usa la descrizione per dettagliare le lavorazioni\n\n**Prossimo tutorial**: "Gestione Rapportini di Cantiere"',
        position: 'center',
      },
    ],
  },

  // ==================== CATEGORIA: HSE (SICUREZZA) ====================
  {
    id: 'hse-overview',
    title: 'Panoramica Completa Modulo HSE',
    description: 'Tour approfondito del modulo Sicurezza & HSE: dashboard compliance, sistema semaforo, gestione alert, formazione, DPI, visite mediche, check-in e documentazione D.Lgs 81/08',
    icon: 'ShieldCheck',
    estimatedTime: '8 minuti',
    category: 'hse',
    steps: [
      {
        id: 'intro',
        title: 'HSE: Health, Safety & Environment üõ°Ô∏è',
        description: 'Il modulo **HSE (Salute, Sicurezza e Ambiente)** √® il cuore della compliance normativa in Gest-e. Gestisce tutti gli adempimenti previsti dal **D.Lgs 81/2008** (Testo Unico Sicurezza):\n\n**Cosa puoi gestire**:\nüéì **Formazione**: corsi obbligatori Art. 37 (base, specifica, preposti, dirigenti)\nü¶∫ **DPI**: consegna e tracciamento dispositivi di protezione\nüè• **Sorveglianza Sanitaria**: visite mediche, idoneit√†, protocollo sanitario\n‚úÖ **Check-in Sicurezza**: verifiche giornaliere pre-lavoro\nüè¢ **Imprese Esterne**: documentazione subappaltatori\nüë∑ **Lavoratori**: anagrafica con stato compliance\nüìã **D.Lgs 81/08**: DVR, POS, PSC, DUVRI, modulistica\n\n**Sistema a Semaforo**: ogni entit√† ha uno stato visivo immediato üü¢üü°üî¥',
        position: 'center',
      },
      {
        id: 'nav-hse',
        title: 'Accedi alla Dashboard HSE',
        description: 'Clicca su **"Dashboard HSE"** nel menu laterale, sezione "Sicurezza & HSE".\n\nQuesta √® la pagina centrale per avere una visione d\'insieme dello stato sicurezza aziendale.',
        targetSelector: '[data-tutorial="nav-hse"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'hse-dashboard',
        title: 'La Dashboard HSE',
        description: 'Il cruscotto HSE mostra a colpo d\'occhio lo stato di compliance aziendale:\n\n**Card Statistiche**:\nüî¥ **Documenti Scaduti**: richiede azione immediata\nüü° **In Scadenza (30gg)**: da rinnovare a breve\nüü¢ **Documenti Validi**: tutto in regola\n\n**Per categoria**:\n- Formazioni scadute/in scadenza\n- Visite mediche scadute/in scadenza\n- DPI scaduti\n- Documenti imprese critici\n\n**Grafici**:\nüìä Distribuzione per stato (torta)\nüìà Trend scadenze mensile (linea)\nüë∑ Top 10 lavoratori critici\nüè¢ Top 10 imprese critiche',
        route: '/hse',
        position: 'center',
      },
      {
        id: 'alert-cards',
        title: 'üö® Le Card di Alert',
        description: 'Le card colorate in alto mostrano i conteggi per urgenza:\n\n**üî¥ Card Rosse - CRITICO**\n- Documenti gi√† scaduti\n- Lavoratori non possono operare\n- Rischio sanzioni in caso ispezione\n- **AZIONE IMMEDIATA RICHIESTA**\n\n**üü° Card Gialle - ATTENZIONE**\n- Scadenza entro 30 giorni\n- Tempo per pianificare il rinnovo\n- Prenota corsi/visite in anticipo\n\n**üü¢ Card Verdi - OK**\n- Tutto in regola\n- Nessuna azione richiesta\n\n**Cliccando su una card** si apre l\'elenco filtrato degli elementi in quello stato specifico.',
        targetSelector: '[data-tutorial="hse-alert-cards"]',
        position: 'bottom',
      },
      {
        id: 'semaforo-system',
        title: 'üö¶ Il Sistema a Semaforo',
        description: 'Ogni entit√† in Gest-e ha un indicatore visivo di stato:\n\nüü¢ **VERDE - Compliance OK**\n- Tutte le formazioni valide\n- Visita medica in corso di validit√†\n- DPI consegnati e tracciati\n- Documenti aziendali aggiornati\n\nüü° **GIALLO - Attenzione**\n- Almeno un documento in scadenza entro 30 giorni\n- Pianifica il rinnovo\n- Il lavoratore pu√≤ ancora operare\n\nüî¥ **ROSSO - Critico**\n- Almeno un documento scaduto\n- **Il lavoratore NON DEVE operare in cantiere**\n- Rischio sanzioni penali per il datore di lavoro\n- Art. 55 D.Lgs 81/08: arresto o ammenda\n\n**Il semaforo √® visibile**:\n- Nella lista lavoratori\n- Nel dettaglio commessa (tab Lavoratori)\n- Nella scheda individuale',
        targetSelector: '[data-tutorial="hse-semaforo"]',
        position: 'right',
      },
      {
        id: 'filter-critical',
        title: 'üî¥ Filtrare gli Elementi Critici',
        description: 'Usa i **filtri di stato** per vedere subito le criticit√† da risolvere:\n\n**Esempio di workflow**:\n1. Filtra per "Solo Critici" üî¥\n2. Vedi l\'elenco di chi ha problemi\n3. Per ogni elemento critico:\n   - Identifica cosa manca (formazione? visita?)\n   - Pianifica l\'azione correttiva\n   - Prenota corso o visita medica\n   - Una volta rinnovato, aggiorna il sistema\n\n**Priorit√† di risoluzione**:\n1. Lavoratori attualmente in cantiere\n2. Lavoratori che devono entrare a breve\n3. Imprese assegnate a commesse attive\n\n**Consiglio**: Controlla i critici ogni luned√¨ mattina e pianifica la settimana.',
        targetSelector: '[data-tutorial="hse-filter-critical"]',
        position: 'bottom',
      },
      {
        id: 'nav-formazione',
        title: 'üéì Accesso alla Gestione Formazione',
        description: 'Dal menu HSE, accedi alla sezione **"Formazione"** per gestire tutti i corsi di sicurezza obbligatori.\n\nI corsi obbligatori secondo D.Lgs 81/08 Art. 37:\n- Formazione Generale (4 ore)\n- Formazione Specifica (4-12 ore in base al rischio)\n- Aggiornamento periodico (6 ore ogni 5 anni)\n- Preposti (8 ore + aggiornamento)\n- Dirigenti (16 ore + aggiornamento)\n- Primo Soccorso (12-16 ore)\n- Antincendio (4-16 ore)\n- Lavori in Quota/Ponteggi\n- PLE (Piattaforme Elevabili)\n- Carrellisti/Mulettisti\n\nVedrai un tutorial dedicato per la gestione formazione.',
        targetSelector: '[data-tutorial="nav-formazione"]',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'formazione-page',
        title: 'Pagina Elenco Formazioni',
        description: 'La pagina formazione mostra tutte le formazioni registrate:\n\n**Per ogni formazione**:\n- Lavoratore (nome e impresa)\n- Tipo corso (Art. 37, Primo Soccorso, ecc.)\n- Titolo specifico\n- Data conseguimento\n- Data scadenza\n- Stato üü¢üü°üî¥\n- Allegato attestato (PDF)\n\n**Filtri disponibili**:\n- Per lavoratore\n- Per tipo corso\n- Per impresa\n- Per stato (valido/scadenza/scaduto)\n\n**Azioni**:\n‚ûï Aggiungi nuova formazione\nüì• Carica attestato\n‚úèÔ∏è Modifica dati\nüóëÔ∏è Elimina',
        route: '/formazione',
        position: 'center',
      },
      {
        id: 'nav-dpi',
        title: 'ü¶∫ Accesso alla Gestione DPI',
        description: 'La sezione **"DPI"** (Dispositivi di Protezione Individuale) traccia la consegna di tutti i dispositivi:\n\n**Obblighi Art. 77 D.Lgs 81/08**:\n- Il datore deve fornire DPI idonei\n- Deve documentare la consegna\n- Deve verificare l\'uso corretto\n- Deve sostituire DPI usurati/scaduti\n\n**Categorie DPI tracciate**:\nü™ñ Testa: elmetti, cuffie antirumore\nüëì Occhi/Viso: occhiali, visiere\nüß§ Mani: guanti (vari tipi)\nüë¢ Piedi: scarpe antinfortunistiche\nüë∑ Corpo: tute, giubbotti alta visibilit√†\nüßó Anticaduta: imbracature, cordini\nüò∑ Vie respiratorie: maschere, filtri',
        targetSelector: '[data-tutorial="nav-dpi"]',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'dpi-page',
        title: 'Registro DPI',
        description: 'Il registro DPI documenta ogni consegna:\n\n**Per ogni consegna registri**:\n- Lavoratore destinatario\n- Tipo DPI\n- Marca e Modello\n- Taglia (se applicabile)\n- Quantit√†\n- Data consegna\n- Data scadenza (se DPI ha scadenza)\n- Note\n\n**Funzionalit√†**:\nüìã Genera verbale consegna (PDF)\n‚úçÔ∏è Firma digitale del lavoratore\nüìú Storico per lavoratore\n‚ö†Ô∏è Alert DPI in scadenza\n\n**Importante**: Conserva i verbali di consegna firmati. Sono richiesti in caso di ispezione o infortunio.',
        route: '/dpi',
        position: 'center',
      },
      {
        id: 'nav-sorveglianza',
        title: 'üè• Accesso Sorveglianza Sanitaria',
        description: 'La sezione **"Sorveglianza Sanitaria"** gestisce visite mediche e idoneit√†:\n\n**Obblighi Art. 41 D.Lgs 81/08**:\n- Visita preventiva (prima dell\'assunzione)\n- Visite periodiche (secondo protocollo)\n- Visita su richiesta del lavoratore\n- Visita per cambio mansione\n- Visita alla cessazione\n\n**Esiti possibili**:\n‚úÖ Idoneo\n‚ö†Ô∏è Idoneo con prescrizioni\n‚ö†Ô∏è Idoneo con limitazioni\n‚ùå Non idoneo temporaneo\n‚ùå Non idoneo permanente\n\n**Nel sistema**:\n- Registri ogni visita\n- Documenti l\'esito\n- Annoti eventuali limitazioni\n- Imposti la prossima scadenza\n- Ricevi alert automatici',
        targetSelector: '[data-tutorial="nav-sorveglianza"]',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'complete',
        title: 'Completo! Ora Conosci il Modulo HSE! üéâ',
        description: 'Hai completato la panoramica del modulo HSE!\n\n**Riepilogo funzionalit√†**:\n‚úÖ Dashboard con vista immediata della compliance\n‚úÖ Sistema semaforo per stato documenti\n‚úÖ Alert automatici per scadenze\n‚úÖ Gestione formazioni con attestati\n‚úÖ Registro DPI con verbali consegna\n‚úÖ Sorveglianza sanitaria completa\n‚úÖ Check-in sicurezza giornalieri\n\n**Tutorial HSE correlati**:\nüéì "Gestione Formazione Lavoratori"\nü¶∫ "Consegna e Tracciamento DPI"\nüè• "Sorveglianza Sanitaria e Visite"\n‚úÖ "Check-in Sicurezza Giornaliero"\nüè¢ "Gestione Imprese Esterne"\n\n**Ricorda**: La sicurezza non √® un costo, √® un investimento che protegge persone e azienda!',
        position: 'center',
      },
    ],
  },
  {
    id: 'formazione-management',
    title: 'Gestione Formazione Obbligatoria',
    description: 'Come registrare corsi di sicurezza, caricare attestati PDF, monitorare le scadenze, pianificare i rinnovi e mantenere la compliance formativa aziendale',
    icon: 'GraduationCap',
    estimatedTime: '6 minuti',
    category: 'hse',
    steps: [
      {
        id: 'intro',
        title: 'Formazione Sicurezza: Obbligo di Legge üéì',
        description: 'La formazione dei lavoratori √® un **obbligo inderogabile** previsto dall\'Art. 37 del D.Lgs 81/08.\n\n**Chi deve essere formato**:\n- Tutti i lavoratori (indipendentemente dal contratto)\n- Preposti\n- Dirigenti\n- Datore di lavoro (se RSPP)\n\n**Sanzioni per mancata formazione**:\n‚öñÔ∏è Arresto da 2 a 4 mesi\nüí∞ Ammenda da 1.474‚Ç¨ a 6.388‚Ç¨\nüìú Per ogni lavoratore non formato\n\n**Cosa gestisce Gest-e**:\n- Anagrafica corsi per lavoratore\n- Scadenze automatiche\n- Alert pre-scadenza\n- Archivio attestati digitale\n- Report compliance formativa',
        position: 'center',
      },
      {
        id: 'nav-formazione',
        title: 'Accedi al Modulo Formazione',
        description: 'Dal menu laterale, sezione "Sicurezza & HSE", clicca su **"Formazione"**.\n\nPuoi anche accedere dalla Dashboard HSE cliccando sulla card "Formazioni Scadute/In Scadenza".',
        targetSelector: '[data-tutorial="nav-formazione"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'formazione-list',
        title: 'L\'Elenco delle Formazioni',
        description: 'La tabella principale mostra tutte le formazioni registrate:\n\n**Colonne**:\n- **Lavoratore**: nome e impresa di appartenenza\n- **Tipo Corso**: categoria (Art. 37, Primo Soccorso, ecc.)\n- **Titolo**: nome specifico del corso\n- **Data Conseguimento**: quando √® stato fatto\n- **Data Scadenza**: quando scade la validit√†\n- **Ore**: durata del corso\n- **Ente Formatore**: chi ha erogato il corso\n- **Stato**: üü¢ Valido / üü° Scadenza / üî¥ Scaduto\n- **Attestato**: icona se c\'√® PDF allegato\n\n**Ordinamento**: clicca sull\'intestazione colonna per ordinare',
        route: '/formazione',
        position: 'center',
      },
      {
        id: 'filter-lavoratore',
        title: 'üë∑ Filtrare per Lavoratore',
        description: 'Usa il filtro **"Lavoratore"** per vedere tutte le formazioni di una persona specifica.\n\n**Utile per**:\n- Verificare la compliance individuale\n- Preparare la scheda per il CSE\n- Identificare corsi mancanti\n- Pianificare aggiornamenti\n\n**Tip**: Cerca anche per cognome parziale, il filtro √® fuzzy.',
        targetSelector: '[data-tutorial="filter-lavoratore"]',
        position: 'bottom',
      },
      {
        id: 'filter-tipo',
        title: 'üìö Filtrare per Tipo Corso',
        description: 'Usa il filtro **"Tipo Corso"** per vedere un tipo specifico:\n\n**Tipi principali**:\nüéì **Art. 37 Base** - Formazione generale (4h) + specifica (4-12h)\nüéì **Preposti** - Formazione per preposti (8h)\nüéì **Dirigenti** - Formazione per dirigenti (16h)\nüöë **Primo Soccorso** - Gruppi A, B, C (12-16h)\nüî• **Antincendio** - Rischio basso/medio/alto (4-16h)\nü™ú **Ponteggi** - Montaggio/smontaggio (28h)\nüèóÔ∏è **Lavori in Quota** - Uso DPI 3¬∞ categoria (8h)\nüöú **PLE** - Piattaforme elevabili (8-12h)\nüöõ **Carrellisti** - Muletti (12h)\nüèóÔ∏è **Gru** - Varie tipologie (12-40h)\n‚õèÔ∏è **Spazi Confinati** - Ambienti sospetti (12h)\n\n**Perch√© filtrare**: per verificare chi ha (o non ha) un certo corso.',
        targetSelector: '[data-tutorial="filter-tipo"]',
        position: 'bottom',
      },
      {
        id: 'new-formazione',
        title: '‚ûï Registrare una Nuova Formazione',
        description: 'Clicca su **"Nuova Formazione"** per registrare un corso completato.\n\n**Quando usarlo**:\n- Dopo che un lavoratore ha completato un corso\n- Quando assumi un lavoratore gi√† formato\n- Per importare lo storico formativo',
        targetSelector: '[data-tutorial="btn-new-formazione"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'form-fields',
        title: 'üìù I Campi della Formazione',
        description: 'Compila accuratamente tutti i campi:\n\nüë∑ **Lavoratore** (obbligatorio)\nSeleziona dall\'anagrafica. Se non esiste, crealo prima in "Lavoratori".\n\nüìö **Tipo Corso** (obbligatorio)\nScegli dalla lista dei tipi standard. Determina la durata validit√†.\n\nüìå **Titolo Corso**\nNome specifico come riportato sull\'attestato.\n\nüìÖ **Data Conseguimento** (obbligatorio)\nQuando il corso √® stato completato/esame superato.\n\n‚è∞ **Data Scadenza**\nCalcolata automaticamente in base al tipo corso. Modificabile se diversa.\n\nüïê **Ore Durata**\nDurata effettiva del corso in ore.\n\nüè´ **Ente Formatore**\nNome dell\'ente/azienda che ha erogato il corso.\n\nüìù **Note**\nInformazioni aggiuntive (sede, docente, ecc.)',
        targetSelector: '[data-tutorial="form-formazione"]',
        position: 'left',
        highlightPadding: 15,
      },
      {
        id: 'upload-attestato',
        title: 'üìé Caricare l\'Attestato (PDF)',
        description: 'L\'upload dell\'attestato √® **FONDAMENTALE**:\n\n**Come fare**:\n1. Clicca su "Carica Attestato" o trascina il file\n2. Seleziona il PDF dell\'attestato\n3. Il file viene caricato e allegato\n\n**Formati accettati**: PDF, JPG, PNG\n**Dimensione max**: 10 MB\n\n**Perch√© √® importante**:\n‚úÖ Prova documentale in caso di ispezione\n‚úÖ Il CSE pu√≤ verificare prima dell\'ingresso in cantiere\n‚úÖ Archivio digitale sempre accessibile\n‚úÖ Non perdi documenti cartacei\n\n**Cosa deve contenere un attestato valido**:\n- Nome e cognome del lavoratore\n- Tipo di corso e durata\n- Data di svolgimento\n- Nome e dati dell\'ente formatore\n- Firma del responsabile/docente\n- Numero di attestato (se presente)',
        targetSelector: '[data-tutorial="upload-attestato"]',
        position: 'right',
        action: 'hover',
      },
      {
        id: 'scadenza-auto',
        title: '‚è∞ Calcolo Automatico Scadenze',
        description: 'Gest-e calcola automaticamente la scadenza in base al tipo corso:\n\n**Durate validit√† standard**:\n- Art. 37 Base: **5 anni** (poi aggiornamento 6h)\n- Preposti: **5 anni** (aggiornamento 6h)\n- Primo Soccorso: **3 anni** (aggiornamento 4-6h)\n- Antincendio: **5 anni** (aggiornamento 2-8h)\n- Ponteggi: **4 anni** (aggiornamento 4h)\n- PLE: **5 anni** (aggiornamento 4h)\n- Carrellisti: **5 anni** (aggiornamento 4h)\n\n**Sistema di alert**:\nüü° 30 giorni prima: passa in stato "Scadenza"\nüî¥ Alla scadenza: passa in stato "Scaduto"\nüìß Email di notifica (se configurata)\n\n**Nota**: Puoi modificare manualmente la scadenza se l\'ente formatore indica una data diversa.',
        targetSelector: '[data-tutorial="scadenza-info"]',
        position: 'top',
      },
      {
        id: 'complete',
        title: 'Ottimo! Ora Gestisci le Formazioni come un Pro! ‚ú®',
        description: 'Hai completato il tutorial sulla gestione formazione!\n\n**Checklist operativa**:\n‚úÖ Registra ogni corso completato appena ricevi l\'attestato\n‚úÖ Carica sempre il PDF dell\'attestato\n‚úÖ Controlla settimanalmente le scadenze (filtro "In Scadenza")\n‚úÖ Pianifica i corsi di aggiornamento con anticipo\n‚úÖ Prima di assegnare un lavoratore a un cantiere, verifica la formazione\n\n**Alert per Compliance**:\n‚ö†Ô∏è Un lavoratore con formazione scaduta NON pu√≤ operare in cantiere\n‚ö†Ô∏è La responsabilit√† √® del datore di lavoro e del CSE\n‚ö†Ô∏è Sanzioni: arresto 2-4 mesi o ammenda 1.474-6.388‚Ç¨\n\n**Tutorial correlato**: "Consegna e Tracciamento DPI"',
        position: 'center',
      },
    ],
  },

  // Aggiungi qui altri tutorial con lo stesso livello di dettaglio...
  // Per brevit√†, aggiungo la struttura per i rimanenti

  {
    id: 'dpi-consegna',
    title: 'Consegna e Tracciamento DPI',
    description: 'Registrare la consegna dei dispositivi di protezione individuale, gestire taglie, scadenze e storico per ogni lavoratore, generare verbali di consegna',
    icon: 'HardHat',
    estimatedTime: '5 minuti',
    category: 'hse',
    steps: [
      {
        id: 'intro',
        title: 'DPI: Obbligo del Datore di Lavoro ü¶∫',
        description: 'La fornitura e documentazione dei DPI √® un obbligo previsto dagli **Artt. 74-79 D.Lgs 81/08**.\n\n**Obblighi del datore di lavoro**:\n‚úÖ Fornire DPI idonei ai rischi\n‚úÖ Documentare la consegna con verbale firmato\n‚úÖ Formare sull\'uso corretto\n‚úÖ Verificare che vengano effettivamente usati\n‚úÖ Sostituire DPI usurati o scaduti\n\n**Cosa registra Gest-e**:\n- Consegna con data e firma\n- Tipo, marca, modello, taglia\n- Scadenza (per DPI con durata limitata)\n- Storico completo per lavoratore\n- Generazione verbale PDF\n\n**Sanzioni per mancata consegna DPI**:\n‚öñÔ∏è Arresto 3-6 mesi o ammenda 2.740-7.014‚Ç¨',
        position: 'center',
      },
      {
        id: 'nav-dpi',
        title: 'Accedi al Registro DPI',
        description: 'Dal menu "Sicurezza & HSE", clicca su **"DPI"** per accedere al registro delle consegne.',
        targetSelector: '[data-tutorial="nav-dpi"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'dpi-list',
        title: 'Il Registro Consegne DPI',
        description: 'La tabella mostra tutte le consegne DPI effettuate:\n\n**Colonne principali**:\n- **Lavoratore**: destinatario del DPI\n- **Tipo DPI**: categoria (Elmetto, Guanti, Scarpe, ecc.)\n- **Marca/Modello**: specifiche del prodotto\n- **Taglia**: se applicabile (S, M, L, XL, numeri)\n- **Quantit√†**: numero pezzi consegnati\n- **Data Consegna**: quando √® stato dato\n- **Data Scadenza**: se il DPI ha scadenza\n- **Stato**: Valido / Scaduto\n\n**Filtri**:\n- Per lavoratore\n- Per tipo DPI\n- Per stato (valido/scaduto)',
        route: '/dpi',
        position: 'center',
      },
      {
        id: 'categories',
        title: 'üè∑Ô∏è Categorie DPI Gestite',
        description: 'I DPI sono organizzati per zona del corpo protetta:\n\nü™ñ **Protezione Testa**\n- Elmetti (EN 397)\n- Cuffie antirumore (EN 352)\n\nüëì **Protezione Occhi e Viso**\n- Occhiali (EN 166)\n- Visiere, Schermi\n\nüß§ **Protezione Mani**\n- Guanti antitaglio (EN 388)\n- Guanti chimici (EN 374)\n- Guanti termici (EN 407)\n\nüë¢ **Protezione Piedi**\n- Scarpe S1, S2, S3 (EN ISO 20345)\n- Stivali\n\nüë∑ **Protezione Corpo**\n- Tute da lavoro\n- Giubbotti alta visibilit√† (EN 20471)\n\nüßó **Protezione Anticaduta**\n- Imbracature (EN 361)\n- Cordini, Dissipatori (EN 355)\n\nüò∑ **Protezione Vie Respiratorie**\n- Maschere FFP2, FFP3\n- Respiratori a filtro',
        targetSelector: '[data-tutorial="dpi-categories"]',
        position: 'bottom',
      },
      {
        id: 'new-dpi',
        title: '‚ûï Registrare una Nuova Consegna',
        description: 'Clicca su **"Nuova Consegna"** per registrare la fornitura di DPI a un lavoratore.\n\n**Workflow tipico**:\n1. Acquisti i DPI\n2. Li consegni fisicamente al lavoratore\n3. Registri in Gest-e la consegna\n4. Generi il verbale PDF\n5. Lo fai firmare al lavoratore\n6. Archivi il verbale firmato',
        targetSelector: '[data-tutorial="btn-new-dpi"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'form-dpi',
        title: 'üìù Dati della Consegna',
        description: 'Compila tutti i campi per una registrazione completa:\n\nüë∑ **Lavoratore** (obbligatorio)\nSeleziona il destinatario dall\'anagrafica.\n\nü¶∫ **Tipo DPI** (obbligatorio)\nScegli la categoria dalla lista.\n\nüè≠ **Marca/Modello**\nSpecifiche del prodotto (utile per riordino).\n\nüìè **Taglia**\nSe applicabile (numeri scarpe, S/M/L/XL).\n\nüî¢ **Quantit√†**\nNumero di pezzi consegnati.\n\nüìÖ **Data Consegna** (obbligatorio)\nData effettiva della fornitura.\n\n‚è∞ **Data Scadenza**\nSe il DPI ha una durata limitata (es. filtri, guanti monouso).\n\nüìù **Note**\nInfo aggiuntive (lotto, fornitore, motivazione sostituzione).',
        targetSelector: '[data-tutorial="form-dpi"]',
        position: 'left',
        highlightPadding: 15,
      },
      {
        id: 'storico',
        title: 'üìú Lo Storico per Lavoratore',
        description: 'Cliccando su un lavoratore puoi vedere lo storico completo:\n\n**Visualizzi**:\n- Tutti i DPI consegnati nel tempo\n- Date e quantit√†\n- DPI attualmente validi\n- DPI scaduti/sostituiti\n\n**Perch√© √® importante**:\n‚úÖ Verifica pre-ingresso cantiere\n‚úÖ Pianificazione riordino DPI\n‚úÖ Tracciabilit√† in caso di infortunio\n‚úÖ Prova documentale per ispezioni\n\n**Report generabili**:\n- Scheda DPI individuale (PDF)\n- Elenco consegne per cantiere\n- DPI in scadenza (per riordino)',
        targetSelector: '[data-tutorial="dpi-storico"]',
        position: 'right',
      },
      {
        id: 'verbale',
        title: 'üìÑ Generare il Verbale di Consegna',
        description: 'Il **verbale di consegna DPI** √® un documento obbligatorio:\n\n**Contenuto del verbale generato**:\n- Dati azienda\n- Dati lavoratore\n- Elenco DPI consegnati con dettagli\n- Data consegna\n- Dichiarazione di presa in consegna\n- Impegno all\'uso corretto\n- Spazio per firma lavoratore\n\n**Come generarlo**:\n1. Vai allo storico del lavoratore\n2. Clicca "Genera Verbale"\n3. Seleziona le consegne da includere\n4. Scarica il PDF\n5. Stampa, fai firmare, scansiona, archivia\n\n**Conservazione**: I verbali vanno conservati per tutta la durata del rapporto di lavoro + 10 anni.',
        targetSelector: '[data-tutorial="genera-verbale"]',
        position: 'bottom',
        action: 'hover',
      },
      {
        id: 'complete',
        title: 'Perfetto! Ora Gestisci i DPI Professionalmente! üéâ',
        description: 'Hai completato il tutorial sulla gestione DPI!\n\n**Checklist operativa**:\n‚úÖ Registra ogni consegna DPI nel sistema\n‚úÖ Genera e fai firmare il verbale\n‚úÖ Controlla periodicamente le scadenze\n‚úÖ Sostituisci DPI usurati o non conformi\n‚úÖ Prima dell\'ingresso in cantiere, verifica i DPI del lavoratore\n\n**Ricorda**:\n‚ö†Ô∏è DPI mancante o inadeguato = lavoratore che non pu√≤ operare\n‚ö†Ô∏è Responsabilit√† del datore di lavoro e del preposto\n‚ö†Ô∏è In caso di infortunio, la mancanza di DPI √® aggravante\n\n**Tutorial correlato**: "Sorveglianza Sanitaria e Visite Mediche"',
        position: 'center',
      },
    ],
  },

  // COMPLIANCE
  {
    id: 'gdpr-compliance',
    title: 'GDPR e Privacy Aziendale',
    description: 'Come gestire la compliance GDPR: registro trattamenti dati, gestione consensi, audit privacy, documentazione e preparazione alle ispezioni del Garante',
    icon: 'Lock',
    estimatedTime: '5 minuti',
    category: 'compliance',
    steps: [
      {
        id: 'intro',
        title: 'GDPR: Protezione Dati Personali üîí',
        description: 'Il **GDPR (Regolamento UE 2016/679)** disciplina il trattamento dei dati personali in Europa.\n\n**Obblighi principali per le aziende**:\nüìã **Registro dei Trattamenti** (Art. 30) - Documentare tutti i trattamenti dati\n‚úÖ **Base Giuridica** - Ogni trattamento deve avere una base legale\nüìù **Informativa** - Comunicare agli interessati come usi i loro dati\nüîê **Sicurezza** - Proteggere i dati con misure adeguate\nüìä **Consenso** - Quando necessario, raccogliere consenso valido\nüóëÔ∏è **Cancellazione** - Eliminare i dati quando non pi√π necessari\n\n**In Gest-e gestisci**:\n- Registro dei trattamenti\n- Consensi raccolti\n- Audit privacy\n- Documentazione GDPR',
        position: 'center',
      },
      {
        id: 'nav-gdpr',
        title: 'Accedi al Modulo GDPR',
        description: 'Dal menu laterale, sezione "Conformit√† & Certificazioni", clicca su **"GDPR"**.',
        targetSelector: '[data-tutorial="nav-gdpr"]',
        route: '/dashboard',
        position: 'right',
        action: 'click',
        actionDelay: 1500,
      },
      {
        id: 'gdpr-dashboard',
        title: 'Dashboard Compliance GDPR',
        description: 'La dashboard GDPR mostra lo stato della compliance privacy:\n\n**Statistiche**:\n- Trattamenti attivi\n- Consensi raccolti\n- Consensi in scadenza\n- Audit programmati\n\n**Sezioni**:\nüìã **Registro Trattamenti**: documenta ogni trattamento dati\n‚úÖ **Gestione Consensi**: traccia i consensi degli interessati\nüîç **Audit Privacy**: pianifica e documenta verifiche\nüìÑ **Documentazione**: informative, policies, contratti DPO',
        route: '/gdpr-compliance',
        position: 'center',
      },
      {
        id: 'registro-trattamenti',
        title: 'üìã Il Registro dei Trattamenti',
        description: 'Il **Registro dei Trattamenti** √® obbligatorio per aziende con pi√π di 250 dipendenti o che trattano dati sensibili.\n\n**Per ogni trattamento documenti**:\n- **Finalit√†**: perch√© tratti questi dati?\n- **Base Giuridica**: contratto, consenso, obbligo legale, interesse legittimo\n- **Categorie di Dati**: anagrafici, di contatto, sanitari, finanziari\n- **Categorie di Interessati**: dipendenti, clienti, fornitori\n- **Destinatari**: chi accede ai dati (interni ed esterni)\n- **Trasferimenti Extra-UE**: se i dati vanno fuori Europa\n- **Periodo Conservazione**: quanto tempo li tieni\n- **Misure di Sicurezza**: come li proteggi\n\n**Esempi di trattamenti**:\n- Gestione anagrafica dipendenti\n- Fatturazione clienti\n- Videosorveglianza\n- Marketing/Newsletter',
        targetSelector: '[data-tutorial="registro-trattamenti"]',
        position: 'left',
      },
      {
        id: 'consensi',
        title: '‚úÖ Gestione dei Consensi',
        description: 'Quando la base giuridica √® il **consenso**, devi documentarlo:\n\n**Per ogni consenso registri**:\n- Interessato (chi ha dato il consenso)\n- Finalit√† (a cosa ha acconsentito)\n- Data raccolta\n- Modalit√† raccolta (modulo, email, verbale)\n- Data eventuale revoca\n\n**Caratteristiche del consenso valido** (Art. 7):\n‚úÖ Libero (senza condizionamenti)\n‚úÖ Specifico (per finalit√† determinate)\n‚úÖ Informato (dopo aver letto l\'informativa)\n‚úÖ Inequivocabile (azione positiva chiara)\n‚úÖ Revocabile (in qualsiasi momento)\n\n**Gestione scadenze**:\nAlcuni consensi possono avere validit√† limitata. Il sistema ti avvisa quando rinnovarli.',
        targetSelector: '[data-tutorial="consensi"]',
        position: 'right',
      },
      {
        id: 'audit',
        title: 'üîç Audit Privacy',
        description: 'Gli **audit privacy** sono verifiche periodiche della compliance GDPR:\n\n**Tipi di audit**:\n- Audit iniziale (assessment)\n- Audit periodici (annuali)\n- Audit a seguito di incidenti\n- Audit pre-ispezione Garante\n\n**Cosa verifichi**:\n‚úÖ Registro trattamenti aggiornato\n‚úÖ Informative corrette e distribuite\n‚úÖ Consensi documentati\n‚úÖ Misure di sicurezza implementate\n‚úÖ Formazione privacy effettuata\n‚úÖ Procedure data breach pronte\n\n**In Gest-e**:\n- Pianifica l\'audit\n- Usa la checklist predefinita\n- Documenta le risultanze\n- Registra azioni correttive',
        targetSelector: '[data-tutorial="audit-gdpr"]',
        position: 'right',
      },
      {
        id: 'complete',
        title: 'Eccellente! Sei Pronto per la Compliance GDPR! üéâ',
        description: 'Hai completato il tutorial sul modulo GDPR!\n\n**Checklist compliance**:\n‚úÖ Mantieni aggiornato il registro dei trattamenti\n‚úÖ Documenta tutti i consensi raccolti\n‚úÖ Effettua audit periodici (almeno annuali)\n‚úÖ Forma i dipendenti sulla privacy\n‚úÖ Prepara procedure per data breach\n\n**Sanzioni GDPR**:\n‚ö†Ô∏è Fino a 20 milioni ‚Ç¨ o 4% fatturato mondiale\n‚ö†Ô∏è Ispezioni del Garante Privacy\n‚ö†Ô∏è Risarcimento danni agli interessati\n\n**Tutorial correlato**: "ISO 9001 - Sistema Qualit√†"',
        position: 'center',
      },
    ],
  },
];
